<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Katsee</title>
    <link rel="stylesheet" href="/user/ChatList.css">
</head>
<body>
    <h2 class="header">채팅</h2>
    <h3 class="subheader">채팅 목록</h3>

    <div class="card-container" id="card-container">
        <div class="card-div" id="card-div">
            <p class="card-p">진행중인 채팅이 없어요 🥲</p>
        </div>
    </div>

    <div class="navigation">
        <a href="/FriendRecommend.html" class="nav-item">
            <img src="/static/images/Friends.png" alt="" class="icon">
            친구 추천
        </a>
        <a href="/RequestList.html" class="nav-item">
            <img src="/static/images/Love.png" alt="" class="icon">
            친구 요청
        </a>
        <a href="/UserHome.html" class="nav-item">
            <img src="/static/images/Home.png" alt="" class="icon">
            홈
        </a>
        <a href="/ChattingList.html" class="nav-item active">
            <img src="/static/images/chat1.png" alt="" class="icon">
            채팅
        </a>
        <a href="/MyPage.html" class="nav-item">
            <img src="/static/images/User.png" alt="" class="icon">
            마이페이지
        </a>
    </div>

    <script>
        // 테스트 초기 데이터
        let memberDataList = [
            {
                id: 'test1',
                profileUrl: '/static/images/ProfileImage.png',
                name: '홍길동',
                createAt: '2025.03.27'
            },
            {
                id: 'test2',
                profileUrl: '/static/images/ProfileImage.png',
                name: '남길동',
                createAt: '2025.03.19'
            }
        ];

        // 백엔드에서 나중에 아래처럼 구성하면됨.
        function memberData() {
            /**
             * @TODO 채팅 목록 조회 API 호출
             */

            memberDataList.push({
                id: 'test1',
                profileUrl: '/static/images/ProfileImage.png',
                name: '홍길동',
                createAt: '2025.03.19'
            });
        }

        function setMemberElement() {
            const cardDiv = document.getElementById('card-div');
            if(memberDataList.length === 0) {
                cardDiv.style.display = 'flex';
            }

            const card = document.getElementById('card-container');
            memberDataList.forEach((data, number) => {
                const chatCard = document.createElement('div');
                chatCard.className = 'chat-card';
                chatCard.id = 'chat-card';

                // 프로필 사진 영역 생성
                const profilePic = document.createElement('div');
                profilePic.className = 'profile-pic bear-profile';

                // 프로필 이미지 생성
                const profileImg = document.createElement('img');
                profileImg.src = data.profileUrl;
                profileImg.alt = 'profile-icon';
                profileImg.id = 'profile-icon';

                // 채팅 정보 영역 생성
                const chatInfo = document.createElement('div');
                chatInfo.className = 'chat-info';

                // 채팅 이름 생성
                const chatName = document.createElement('div');
                chatName.className = 'chat-name';
                chatName.id = 'chat-name';
                chatName.textContent = data.name;
                chatName.onclick = function() {
                    window.location.href = '/Chatting.html';
                };

                // 채팅 메시지 생성
                const chatMessage = document.createElement('div');
                chatMessage.className = 'chat-message';
                chatMessage.id = 'chat-content';
                chatMessage.textContent = data.createAt;

                // 삭제 버튼 생성
                const deleteBtn = document.createElement('a');
                deleteBtn.href = '#';
                deleteBtn.className = 'status';
                deleteBtn.id = 'delete-btn';
                deleteBtn.textContent = '삭제';

                // 요소들을 구조에 맞게 추가
                profilePic.appendChild(profileImg);
                chatInfo.appendChild(chatName);
                chatInfo.appendChild(chatMessage);

                chatCard.appendChild(profilePic);
                chatCard.appendChild(chatInfo);
                chatCard.appendChild(deleteBtn);
                card.appendChild(chatCard);
            });
        }

        setMemberElement();
    </script>
</body>
</html>
